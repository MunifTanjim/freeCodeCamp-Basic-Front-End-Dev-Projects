!function(t){function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var e={};n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=9)}([function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),o=function(){function t(n){if(i(this,t),this.turn="",this.oMovesCount=0,this.result="still running",this.board=[],void 0!==n){var e=n.board.length;this.board=new Array(e);for(var r=0;r<e;r++)this.board[r]=n.board[r];this.oMovesCount=n.oMovesCount,this.result=n.result,this.turn=n.turn}}return r(t,[{key:"advanceTurn",value:function(){this.turn="X"===this.turn?"O":"X"}},{key:"emptyCells",value:function(){for(var t=[],n=0;n<9;n++)"E"===this.board[n]&&t.push(n);return t}},{key:"isTerminal",value:function(){for(var t=this.board,n=0;n<=6;n+=3)if("E"!==t[n]&&t[n]===t[n+1]&&t[n+1]==t[n+2])return this.result=t[n]+"-won",!0;for(var e=0;e<=2;e++)if("E"!==t[e]&&t[e]===t[e+3]&&t[e+3]===t[e+6])return this.result=t[e]+"-won",!0;for(var i=0,r=4;i<=2;i+=2,r-=2)if("E"!==t[i]&&t[i]==t[i+r]&&t[i+r]===t[i+2*r])return this.result=t[i]+"-won",!0;return!this.emptyCells().length&&(this.result="draw",!0)}}]),t}();t.exports=o},function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),o=e(0),a=function(){function t(n){i(this,t),this.ai=n,this.currentState=new o,this.currentState.board=["E","E","E","E","E","E","E","E","E"],this.currentState.turn="X",this.status="beginning",this.ui={}}return r(t,[{key:"advanceTo",value:function(t){var n=this;if(this.currentState=t,t.isTerminal())this.status="ended","X-won"===t.result?"X"===this.ui.config.option.playerSymbol?this.ui.switchViewTo("won"):this.ui.switchViewTo("lost"):"O-won"===t.result?"O"===this.ui.config.option.playerSymbol?this.ui.switchViewTo("won"):this.ui.switchViewTo("lost"):this.ui.switchViewTo("draw");else if(this.currentState.turn===this.ui.config.option.playerSymbol)this.ui.switchViewTo("human");else if(this.ui.switchViewTo("robot"),this.ui.aifakeDelay){var e=1e3*Math.random();setTimeout(function(){return n.ai.notify()},e)}else this.ai.notify()}},{key:"start",value:function(){"beginning"==this.status&&(this.advanceTo(this.currentState),this.status="running")}},{key:"setUI",value:function(t){this.ui=t}}],[{key:"score",value:function(t){if("still running"!==t.result)return"X-won"===t.result?10-t.oMovesCount:"O-won"===t.result?-10+t.oMovesCount:0}}]),t}();t.exports=a},function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t){if(t.isTerminal())return a.score(t);var n=void 0;return n="X"===t.turn?-1e3:1e3,t.emptyCells().map(function(n){return new s(n).applyTo(t)}).forEach(function(e){var i=r(e);"X"===t.turn?i>n&&(n=i):i<n&&(n=i)}),n}var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),a=e(1),s=e(6),u=function(){function t(n){i(this,t),this.levelOfIntelligence=n,this.game={},this.ui={}}return o(t,[{key:"takeABlindMove",value:function(){var t=this.game.currentState.emptyCells(),n=t[Math.floor(Math.random()*t.length)],e=new s(n),i=e.applyTo(this.game.currentState),r=this.game.currentState,o=r.board,a=r.turn;this.ui.insertSymbol(n,a,o),this.game.advanceTo(i)}},{key:"takeANoviceMove",value:function(){var t=this,n=this.game.currentState.emptyCells(),e=n.map(function(n){var e=new s(n),i=e.applyTo(t.game.currentState);return e.minimaxVal=r(i),e}),i=this.game.currentState,o=i.board,a=i.turn;"X"===a?e.sort(s.DESCENDING):e.sort(s.ASCENDING);var u=void 0;u=100*Math.random()<=40?e[0]:e.length>=2?e[1]:e[0];var c=u.applyTo(this.game.currentState);this.ui.insertSymbol(u.movePosition,a,o),this.game.advanceTo(c)}},{key:"takeAMasterMove",value:function(){var t=this,n=this.game.currentState.emptyCells(),e=n.map(function(n){var e=new s(n),i=e.applyTo(t.game.currentState);return e.minimaxVal=r(i),e}),i=this.game.currentState,o=i.board,a=i.turn;"X"===a?e.sort(s.DESCENDING):e.sort(s.ASCENDING);var u=e[0],c=u.applyTo(this.game.currentState);this.ui.insertSymbol(u.movePosition,a,o),this.game.advanceTo(c)}},{key:"notify",value:function(){switch(this.levelOfIntelligence){case"blind":this.takeABlindMove();break;case"novice":this.takeANoviceMove();break;case"master":this.takeAMasterMove()}}},{key:"plays",value:function(t){this.game=t}},{key:"setUI",value:function(t){this.ui=t}}]),t}();t.exports=u},function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t){t.preventDefault();var n=this.board,e=n.offsetLeft,i=n.offsetTop,r=t.clientX,o=t.clientY,a=c(l(e,i,r,o),this.canvas.cellCornersStore),s=this.canvas.cellCornersStore.indexOf(a),f=this.game,h=f.currentState,v=f.status;if("E"===h.board[s]&&"running"===v&&h.turn===this.config.option.playerSymbol){var d=new u(h);this.insertSymbol(s,h.turn,h.board),d.board[s]=h.turn,d.advanceTurn(),this.game.advanceTo(d)}}var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),a=e(7),s=e(8),u=e(0),c=function(t,n){return n.filter(function(n){var e=t.x>n[0][0]&&t.x<n[1][0],i=t.y>n[0][1]&&t.y<n[1][1];return e&&i})[0]},l=function(t,n,e,i){return{x:e-t,y:i-n}},f=function(){function t(n,e,r,o){i(this,t),this.body=n.body,this.size={},this.size.board=e,this.size.cell=this.size.board/3,this.size.cellPadding=this.size.cell/10,this.size.canvasPadding=this.size.board/30,this.size.canvas=this.size.board+2*this.size.canvasPadding,this.board=n.querySelector("#board"),this.board.height=this.size.canvas,this.board.width=this.size.canvas,this.ctx=this.board.getContext("2d"),this.canvas=new a(this.size),this.config=new s,this.setupSteps=["difficulty","symbols","finish"],this.aifakeDelay=o,this.bindParts=r,this.game={}}return o(t,[{key:"init",value:function(){this.switchConfigView("difficulty")}},{key:"draw",value:function(){a.drawBoard(this.ctx,this.size),this.board.addEventListener("click",r.bind(this))}},{key:"insertSymbol",value:function(t,n,e){var i=this.canvas.cellCornersStore[t],r="E"===e[t];i&&r&&(this.ctx.lineWidth=2,this.canvas.draw[n](this.ctx,i,this.size),this.ctx.lineWidth=1)}},{key:"switchConfigView",value:function(t){var n=this,e=this.body.querySelectorAll("."+t+"-setup button");this.body.classList="setup "+t;var i=this.setupSteps.indexOf(t),r=function(){i<n.setupSteps.length-1?n.switchConfigView(n.setupSteps[i+1]):(n.body.classList="game",n.bindParts(function(){n.draw(),n.game.start()}))};this.config.setup[t](e,r)}},{key:"switchViewTo",value:function(t){var n=this;!function(t){n.body.id=t}(t)}},{key:"setGame",value:function(t){this.game=t}}]),t}();t.exports=f},function(t,n){},function(t,n,e){t.exports=e.p+"humans.txt"},function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),o=e(0),a=function(){function t(n){i(this,t),this.movePosition=n,this.minimaxVal=0}return r(t,[{key:"applyTo",value:function(t){var n=new o(t);return n.board[this.movePosition]=t.turn,"O"===t.turn&&n.oMovesCount++,n.advanceTurn(),n}}],[{key:"ASCENDING",value:function(t,n){return t.minimaxVal<n.minimaxVal?-1:t.minimaxVal>n.minimaxVal?1:0}},{key:"DESCENDING",value:function(t,n){return t.minimaxVal>n.minimaxVal?-1:t.minimaxVal<n.minimaxVal?1:0}}]),t}();t.exports=a},function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),a=function(t,n){for(var e=t.board,i=t.canvas,o=t.canvasPadding,a=t.cell,s=[0+o,0+o],u=[i-o,i-o],c=function(t){return[t[0]+a,t[1]+a]},l=[].concat(s),f=0;f<9;f++){var h=c(l);h[0]>u[0]&&(l[0]-=e,l[1]+=a,h=c(l)),n[f]=[[].concat(r(l)),[].concat(r(h))],l[0]=h[0],l[1]=h[1]-a}},s=function(){function t(n){i(this,t),this.cellCornersStore=[[],[],[],[],[],[],[],[],[]],a(n,this.cellCornersStore),this.draw={X:u,O:c}}return o(t,null,[{key:"drawBoard",value:function(t,n){var e=n.board,i=n.cell,r=n.canvasPadding,o=i+r,a=r,s=2*i+r,u=e+r,c=t.lineWidth;t.lineWidth=3,t.moveTo(o,a),t.lineTo(o,u),t.moveTo(a,o),t.lineTo(u,o),t.moveTo(s,a),t.lineTo(s,u),t.moveTo(a,s),t.lineTo(u,s),t.stroke(),t.lineWidth=c}}]),t}(),u=function(t,n,e){var i=e.cell,r=e.cellPadding,o=n[0][0],a=n[0][1],s=n[1][0],u=n[1][1];t.moveTo(o+r,a+r),t.lineTo(s-r,u-r),t.moveTo(o-r+i,a+r),t.lineTo(s+r-i,u-r),t.stroke()},c=function(t,n,e){var i=e.cellPadding,r=(n[0][0]+n[1][0])/2,o=(n[0][1]+n[1][1])/2,a=r-n[0][0]-i;t.beginPath(),t.arc(r,o,a,0,2*Math.PI),t.stroke()};t.exports=s},function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){var e=this,i=function i(r){r.preventDefault(),e.option.difficulty=r.target.id,t.forEach(function(t){return t.removeEventListener("click",i)}),n()};t.forEach(function(t){return t.addEventListener("click",i)})}function o(t,n){var e=this,i=function i(r){r.preventDefault();var o=r.target.id;e.option.playerSymbol=o,e.option.aiSymbol="X"===o?"O":"X",t.forEach(function(t){return t.removeEventListener("click",i)}),n()};t.forEach(function(t){return t.addEventListener("click",i)})}function a(t,n){function e(t){t.preventDefault(),n()}t[0].addEventListener("click",e)}var s=function t(){i(this,t),this.option={},this.setup={difficulty:r.bind(this),symbols:o.bind(this),finish:a.bind(this)}};t.exports=s},function(t,n,e){"use strict";function i(t){"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)}function r(t){Object.assign(u,c.ui.config.option),c.ai=new s(u.difficulty),c.game=new a(c.ai),c.ai.plays(c.game),c.ai.setUI(c.ui),c.ui.setGame(c.game),c.game.setUI(c.ui),t()}e(4),e(5);var o=e(3),a=e(1),s=e(2),u={},c={ai:null,ui:null,game:null};i(function(){document.querySelector("button#restart").addEventListener("click",function(t){t.preventDefault(),window.location.reload()}),c.ui=new o(document,300,r,!0),c.ui.init()})}]);